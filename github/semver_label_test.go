package github

import (
	"fmt"
	"testing"

	"github.com/google/go-github/github"
	"github.com/stretchr/testify/assert"
	"gopkg.in/h2non/gock.v1"
)

func TestSemverLabelServiceGetFromPullRequest(t *testing.T) {
	defer gock.Off()

	scenarios := []struct {
		name  string
		setup func()
		test  func(version Version, err error)
	}{
		{
			"An error occurred when requesting github api",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(400).
					JSON(
						map[string]interface{}{
							"message": "Problems parsing JSON",
						})
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "can't fetch github api to get label for pull request #1 : GET https://api.github.com/repos/antham/versem/issues/1/labels: 400 Problems parsing JSON []")
			},
		},
		{
			"No semver label attached to the pull request",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/bug",
								"name":    "bug",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "an error occurred when parsing version from pull request #1 : no semver label found")
			},
		},
		{
			"Several semver label attached to the pull request",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/major",
								"name":    "major",
								"color":   "f29513",
								"default": true,
							},
							{
								"id":      208045947,
								"url":     "https://api.github.com/repos/antham/versem/labels/minor",
								"name":    "minor",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "an error occurred when parsing version from pull request #1 : more than one semver label found")
			},
		},
		{
			"Fetch norelease label",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/norelease",
								"name":    "norelease",
								"color":   "f29513",
								"default": true,
							},
							{
								"id":      208045947,
								"url":     "https://api.github.com/repos/antham/versem/labels/bug",
								"name":    "bug",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, NORELEASE, version)
			},
		},
		{
			"Fetch patch label",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/patch",
								"name":    "patch",
								"color":   "f29513",
								"default": true,
							},
							{
								"id":      208045947,
								"url":     "https://api.github.com/repos/antham/versem/labels/bug",
								"name":    "bug",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, PATCH, version)
			},
		},
		{
			"Fetch minor label",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/minor",
								"name":    "minor",
								"color":   "f29513",
								"default": true,
							},
							{
								"id":      208045947,
								"url":     "https://api.github.com/repos/antham/versem/labels/bug",
								"name":    "bug",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, MINOR, version)
			},
		},
		{
			"Fetch major label",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/issues/1/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{
							{
								"id":      208045946,
								"url":     "https://api.github.com/repos/antham/versem/labels/major",
								"name":    "major",
								"color":   "f29513",
								"default": true,
							},
							{
								"id":      208045947,
								"url":     "https://api.github.com/repos/antham/versem/labels/bug",
								"name":    "bug",
								"color":   "f29513",
								"default": true,
							},
						},
					)
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, MAJOR, version)
			},
		},
	}

	for _, scenario := range scenarios {
		scenario := scenario
		t.Run(scenario.name, func(*testing.T) {
			scenario.setup()
			s := NewSemverLabelService("antham", "versem", "396531004112aa66a7fda31bfdca7d00")
			scenario.test(s.GetFromPullRequest(1))
			assert.True(t, gock.IsDone())
		})
	}
}

func TestSemverLabelServiceGetFromCommit(t *testing.T) {
	defer gock.Off()

	scenarios := []struct {
		name  string
		setup func()
		test  func(version Version, err error)
	}{
		{
			"A client error occurred when requesting github api",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(404)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "can't fetch github api to get label from commit a6e6c8b8c34d2382e591587e960e7e7f825cb221 : status code 404")
			},
		},
		{
			"A server error occurred when requesting github api",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					ReplyError(fmt.Errorf("an error occurred"))
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "can't fetch github api to get label from commit a6e6c8b8c34d2382e591587e960e7e7f825cb221 : Get https://api.github.com/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls: an error occurred")
			},
		},
		{
			"Can't parse github response",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					BodyString("whatever")

			},
			func(version Version, err error) {
				assert.EqualError(t, err, "can't decode github json response : invalid character 'w' looking for beginning of value")
			},
		},
		{
			"Pull request not found",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]map[string]interface{}{},
					)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "no pull request associated to commit a6e6c8b8c34d2382e591587e960e7e7f825cb221")
			},
		},
		{
			"Several pull requests found",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]interface{}{
							map[string]interface{}{
								"_links": map[string]interface{}{
									"comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347/comments",
									},
									"commits": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/commits",
									},
									"html": map[string]interface{}{
										"href": "https://github.com/antham/versem/pull/1347",
									},
									"issue": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347",
									},
									"review_comment": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
									},
									"review_comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
									},
									"self": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347",
									},
									"statuses": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
									},
								},
								"active_lock_reason": "too heated",
								"assignee": map[string]interface{}{
									"avatar_url":    "https://github.com/images/error/antham_happy.gif",
									"events_url":    "https://api.github.com/users/antham/events{/privacy}",
									"followers_url": "https://api.github.com/users/antham/followers",
									"following_url": "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":   "",
									"html_url":      "https://github.com/antham",
									"id":            1, "login": "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
								"assignees": []interface{}{
									map[string]interface{}{
										"avatar_url":    "https://github.com/images/error/antham_happy.gif",
										"events_url":    "https://api.github.com/users/antham/events{/privacy}",
										"followers_url": "https://api.github.com/users/antham/followers",
										"following_url": "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":   "",
										"html_url":      "https://github.com/antham",
										"id":            1, "login": "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"author_association": "OWNER",
								"base": map[string]interface{}{
									"label": "antham:master",
									"ref":   "master",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false,
										"assignees_url":      "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":          "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":       "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":          "https://github.com/antham/versem.git",
										"collaborators_url":  "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":       "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":        "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":        "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":       "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":   "http://api.github.com/repos/antham/versem/contributors",
										"created_at":         "2011-01-26T19:01:12Z",
										"default_branch":     "master",
										"deployments_url":    "http://api.github.com/repos/antham/versem/deployments",
										"description":        "This your first repo!",
										"disabled":           false,
										"downloads_url":      "http://api.github.com/repos/antham/versem/downloads",
										"events_url":         "http://api.github.com/repos/antham/versem/events",
										"fork":               false,
										"forks_count":        9,
										"forks_url":          "http://api.github.com/repos/antham/versem/forks",
										"full_name":          "antham/versem",
										"git_commits_url":    "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":       "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":       "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":            "git:github.com/antham/versem.git",
										"has_downloads":      true,
										"has_issues":         true,
										"has_pages":          false,
										"has_projects":       true,
										"has_wiki":           true,
										"homepage":           "https://github.com",
										"hooks_url":          "http://api.github.com/repos/antham/versem/hooks",
										"html_url":           "https://github.com/antham/versem",
										"id":                 1.296269e+06,
										"issue_comment_url":  "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":   "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":         "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":           "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":         "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":           interface{}(nil),
										"languages_url":      "http://api.github.com/repos/antham/versem/languages",
										"merges_url":         "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":     "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":         "git:git.example.com/antham/versem",
										"name":               "versem",
										"network_count":      0,
										"node_id":            "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url":  "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count":  0,
										"owner": map[string]interface{}{
											"avatar_url":    "https://github.com/images/error/antham_happy.gif",
											"events_url":    "https://api.github.com/users/antham/events{/privacy}",
											"followers_url": "https://api.github.com/users/antham/followers",
											"following_url": "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":   "",
											"html_url":      "https://github.com/antham",
											"id":            1, "login": "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"body":         "Please pull these awesome changes",
								"closed_at":    "2011-01-26T19:01:12Z",
								"comments_url": "https://api.github.com/repos/antham/versem/issues/1347/comments",
								"commits_url":  "https://api.github.com/repos/antham/versem/pulls/1347/commits",
								"created_at":   "2011-01-26T19:01:12Z",
								"diff_url":     "https://github.com/antham/versem/pull/1347.diff",
								"draft":        false,
								"head": map[string]interface{}{
									"label": "antham:new-topic",
									"ref":   "new-topic",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false, "assignees_url": "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":         "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":      "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":         "https://github.com/antham/versem.git",
										"collaborators_url": "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":      "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":       "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":       "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":      "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":  "http://api.github.com/repos/antham/versem/contributors",
										"created_at":        "2011-01-26T19:01:12Z",
										"default_branch":    "master",
										"deployments_url":   "http://api.github.com/repos/antham/versem/deployments",
										"description":       "This your first repo!",
										"disabled":          false,
										"downloads_url":     "http://api.github.com/repos/antham/versem/downloads",
										"events_url":        "http://api.github.com/repos/antham/versem/events",
										"fork":              false,
										"forks_count":       9,
										"forks_url":         "http://api.github.com/repos/antham/versem/forks",
										"full_name":         "antham/versem",
										"git_commits_url":   "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":      "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":      "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":           "git:github.com/antham/versem.git",
										"has_downloads":     true,
										"has_issues":        true,
										"has_pages":         false,
										"has_projects":      true,
										"has_wiki":          true,
										"homepage":          "https://github.com",
										"hooks_url":         "http://api.github.com/repos/antham/versem/hooks",
										"html_url":          "https://github.com/antham/versem",
										"id":                1.296269e+06,
										"issue_comment_url": "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":  "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":        "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":          "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":        "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":          interface{}(nil),
										"languages_url":     "http://api.github.com/repos/antham/versem/languages",
										"merges_url":        "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":    "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":        "git:git.example.com/antham/versem",
										"name":              "versem",
										"network_count":     0,
										"node_id":           "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url": "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count": 0,
										"owner": map[string]interface{}{
											"avatar_url":          "https://github.com/images/error/antham_happy.gif",
											"events_url":          "https://api.github.com/users/antham/events{/privacy}",
											"followers_url":       "https://api.github.com/users/antham/followers",
											"following_url":       "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":         "",
											"html_url":            "https://github.com/antham",
											"id":                  1,
											"login":               "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
								},
								"html_url":  "https://github.com/antham/versem/pull/1347",
								"id":        1,
								"issue_url": "https://api.github.com/repos/antham/versem/issues/1347",
								"labels": []interface{}{
									map[string]interface{}{
										"color":       "f29513",
										"default":     true,
										"description": "Something isn't working",
										"id":          2.08045946e+08,
										"name":        "bug",
										"node_id":     "MDU6TGFiZWwyMDgwNDU5NDY=",
										"url":         "https://api.github.com/repos/antham/versem/labels/bug",
									},
								},
								"locked": true, "merge_commit_sha": "e5bd3914e2e596debea16f433f57875b5b90bcd6",
								"merged_at": "2011-01-26T19:01:12Z",
								"milestone": map[string]interface{}{
									"closed_at":     "2013-02-12T13:22:01Z",
									"closed_issues": 8,
									"created_at":    "2011-04-10T20:09:31Z",
									"creator": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
									"description": "Tracking milestone for version 1.0",
									"due_on":      "2012-10-09T23:39:01Z",
									"html_url":    "https://github.com/antham/versem/milestones/v1.0",
									"id":          1.002604e+06,
									"labels_url":  "https://api.github.com/repos/antham/versem/milestones/1/labels",
									"node_id":     "MDk6TWlsZXN0b25lMTAwMjYwNA==",
									"number":      1,
									"open_issues": 4,
									"state":       "open",
									"title":       "v1.0",
									"updated_at":  "2014-03-03T18:58:10Z",
									"url":         "https://api.github.com/repos/antham/versem/milestones/1",
								},
								"node_id":   "MDExOlB1bGxSZXF1ZXN0MQ==",
								"number":    1347,
								"patch_url": "https://github.com/antham/versem/pull/1347.patch",
								"requested_reviewers": []interface{}{map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/other_user_happy.gif",
									"events_url":          "https://api.github.com/users/other_user/events{/privacy}",
									"followers_url":       "https://api.github.com/users/other_user/followers",
									"following_url":       "https://api.github.com/users/other_user/following{/other_user}",
									"gists_url":           "https://api.github.com/users/other_user/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/other_user",
									"id":                  1,
									"login":               "other_user",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/other_user/orgs",
									"received_events_url": "https://api.github.com/users/other_user/received_events",
									"repos_url":           "https://api.github.com/users/other_user/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/other_user/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/other_user/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/other_user",
								}},
								"requested_teams": []interface{}{map[string]interface{}{
									"description":      "A great team.",
									"id":               1,
									"members_url":      "https://api.github.com/teams/1/members{/member}",
									"name":             "Justice League",
									"node_id":          "MDQ6VGVhbTE=",
									"parent":           interface{}(nil),
									"permission":       "admin",
									"privacy":          "closed",
									"repositories_url": "https://api.github.com/teams/1/repos",
									"slug":             "justice-league",
									"url":              "https://api.github.com/teams/1",
								}},
								"review_comment_url":  "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
								"review_comments_url": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
								"state":               "open",
								"statuses_url":        "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
								"title":               "new-feature",
								"updated_at":          "2011-01-26T19:01:12Z",
								"url":                 "https://api.github.com/repos/antham/versem/pulls/1347",
								"user": map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/antham_happy.gif",
									"events_url":          "https://api.github.com/users/antham/events{/privacy}",
									"followers_url":       "https://api.github.com/users/antham/followers",
									"following_url":       "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/antham",
									"id":                  1,
									"login":               "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
							},
							map[string]interface{}{
								"_links": map[string]interface{}{
									"comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1348/comments",
									},
									"commits": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1348/commits",
									},
									"html": map[string]interface{}{
										"href": "https://github.com/antham/versem/pull/1348",
									},
									"issue": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1348",
									},
									"review_comment": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
									},
									"review_comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1348/comments",
									},
									"self": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1348",
									},
									"statuses": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
									},
								},
								"active_lock_reason": "too heated",
								"assignee": map[string]interface{}{
									"avatar_url":    "https://github.com/images/error/antham_happy.gif",
									"events_url":    "https://api.github.com/users/antham/events{/privacy}",
									"followers_url": "https://api.github.com/users/antham/followers",
									"following_url": "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":   "",
									"html_url":      "https://github.com/antham",
									"id":            1, "login": "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
								"assignees": []interface{}{
									map[string]interface{}{
										"avatar_url":    "https://github.com/images/error/antham_happy.gif",
										"events_url":    "https://api.github.com/users/antham/events{/privacy}",
										"followers_url": "https://api.github.com/users/antham/followers",
										"following_url": "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":   "",
										"html_url":      "https://github.com/antham",
										"id":            1, "login": "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"author_association": "OWNER",
								"base": map[string]interface{}{
									"label": "antham:master",
									"ref":   "master",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false,
										"assignees_url":      "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":          "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":       "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":          "https://github.com/antham/versem.git",
										"collaborators_url":  "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":       "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":        "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":        "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":       "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":   "http://api.github.com/repos/antham/versem/contributors",
										"created_at":         "2011-01-26T19:01:12Z",
										"default_branch":     "master",
										"deployments_url":    "http://api.github.com/repos/antham/versem/deployments",
										"description":        "This your first repo!",
										"disabled":           false,
										"downloads_url":      "http://api.github.com/repos/antham/versem/downloads",
										"events_url":         "http://api.github.com/repos/antham/versem/events",
										"fork":               false,
										"forks_count":        9,
										"forks_url":          "http://api.github.com/repos/antham/versem/forks",
										"full_name":          "antham/versem",
										"git_commits_url":    "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":       "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":       "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":            "git:github.com/antham/versem.git",
										"has_downloads":      true,
										"has_issues":         true,
										"has_pages":          false,
										"has_projects":       true,
										"has_wiki":           true,
										"homepage":           "https://github.com",
										"hooks_url":          "http://api.github.com/repos/antham/versem/hooks",
										"html_url":           "https://github.com/antham/versem",
										"id":                 1.296269e+06,
										"issue_comment_url":  "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":   "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":         "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":           "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":         "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":           interface{}(nil),
										"languages_url":      "http://api.github.com/repos/antham/versem/languages",
										"merges_url":         "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":     "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":         "git:git.example.com/antham/versem",
										"name":               "versem",
										"network_count":      0,
										"node_id":            "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url":  "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count":  0,
										"owner": map[string]interface{}{
											"avatar_url":    "https://github.com/images/error/antham_happy.gif",
											"events_url":    "https://api.github.com/users/antham/events{/privacy}",
											"followers_url": "https://api.github.com/users/antham/followers",
											"following_url": "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":   "",
											"html_url":      "https://github.com/antham",
											"id":            1, "login": "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"body":         "Please pull these awesome changes",
								"closed_at":    "2011-01-26T19:01:12Z",
								"comments_url": "https://api.github.com/repos/antham/versem/issues/1348/comments",
								"commits_url":  "https://api.github.com/repos/antham/versem/pulls/1348/commits",
								"created_at":   "2011-01-26T19:01:12Z",
								"diff_url":     "https://github.com/antham/versem/pull/1348.diff",
								"draft":        false,
								"head": map[string]interface{}{
									"label": "antham:new-topic",
									"ref":   "new-topic",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false, "assignees_url": "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":         "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":      "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":         "https://github.com/antham/versem.git",
										"collaborators_url": "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":      "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":       "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":       "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":      "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":  "http://api.github.com/repos/antham/versem/contributors",
										"created_at":        "2011-01-26T19:01:12Z",
										"default_branch":    "master",
										"deployments_url":   "http://api.github.com/repos/antham/versem/deployments",
										"description":       "This your first repo!",
										"disabled":          false,
										"downloads_url":     "http://api.github.com/repos/antham/versem/downloads",
										"events_url":        "http://api.github.com/repos/antham/versem/events",
										"fork":              false,
										"forks_count":       9,
										"forks_url":         "http://api.github.com/repos/antham/versem/forks",
										"full_name":         "antham/versem",
										"git_commits_url":   "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":      "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":      "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":           "git:github.com/antham/versem.git",
										"has_downloads":     true,
										"has_issues":        true,
										"has_pages":         false,
										"has_projects":      true,
										"has_wiki":          true,
										"homepage":          "https://github.com",
										"hooks_url":         "http://api.github.com/repos/antham/versem/hooks",
										"html_url":          "https://github.com/antham/versem",
										"id":                1.296269e+06,
										"issue_comment_url": "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":  "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":        "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":          "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":        "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":          interface{}(nil),
										"languages_url":     "http://api.github.com/repos/antham/versem/languages",
										"merges_url":        "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":    "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":        "git:git.example.com/antham/versem",
										"name":              "versem",
										"network_count":     0,
										"node_id":           "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url": "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count": 0,
										"owner": map[string]interface{}{
											"avatar_url":          "https://github.com/images/error/antham_happy.gif",
											"events_url":          "https://api.github.com/users/antham/events{/privacy}",
											"followers_url":       "https://api.github.com/users/antham/followers",
											"following_url":       "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":         "",
											"html_url":            "https://github.com/antham",
											"id":                  1,
											"login":               "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
								},
								"html_url":  "https://github.com/antham/versem/pull/1348",
								"id":        1,
								"issue_url": "https://api.github.com/repos/antham/versem/issues/1348",
								"labels": []interface{}{
									map[string]interface{}{
										"color":       "f29513",
										"default":     true,
										"description": "Something isn't working",
										"id":          2.08045946e+08,
										"name":        "bug",
										"node_id":     "MDU6TGFiZWwyMDgwNDU5NDY=",
										"url":         "https://api.github.com/repos/antham/versem/labels/bug",
									},
								},
								"locked": true, "merge_commit_sha": "e5bd3914e2e596debea16f433f57875b5b90bcd6",
								"merged_at": "2011-01-26T19:01:12Z",
								"milestone": map[string]interface{}{
									"closed_at":     "2013-02-12T13:22:01Z",
									"closed_issues": 8,
									"created_at":    "2011-04-10T20:09:31Z",
									"creator": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
									"description": "Tracking milestone for version 1.0",
									"due_on":      "2012-10-09T23:39:01Z",
									"html_url":    "https://github.com/antham/versem/milestones/v1.0",
									"id":          1.002604e+06,
									"labels_url":  "https://api.github.com/repos/antham/versem/milestones/1/labels",
									"node_id":     "MDk6TWlsZXN0b25lMTAwMjYwNA==",
									"number":      1,
									"open_issues": 4,
									"state":       "open",
									"title":       "v1.0",
									"updated_at":  "2014-03-03T18:58:10Z",
									"url":         "https://api.github.com/repos/antham/versem/milestones/1",
								},
								"node_id":   "MDExOlB1bGxSZXF1ZXN0MQ==",
								"number":    1348,
								"patch_url": "https://github.com/antham/versem/pull/1348.patch",
								"requested_reviewers": []interface{}{map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/other_user_happy.gif",
									"events_url":          "https://api.github.com/users/other_user/events{/privacy}",
									"followers_url":       "https://api.github.com/users/other_user/followers",
									"following_url":       "https://api.github.com/users/other_user/following{/other_user}",
									"gists_url":           "https://api.github.com/users/other_user/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/other_user",
									"id":                  1,
									"login":               "other_user",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/other_user/orgs",
									"received_events_url": "https://api.github.com/users/other_user/received_events",
									"repos_url":           "https://api.github.com/users/other_user/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/other_user/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/other_user/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/other_user",
								}},
								"requested_teams": []interface{}{map[string]interface{}{
									"description":      "A great team.",
									"id":               1,
									"members_url":      "https://api.github.com/teams/1/members{/member}",
									"name":             "Justice League",
									"node_id":          "MDQ6VGVhbTE=",
									"parent":           interface{}(nil),
									"permission":       "admin",
									"privacy":          "closed",
									"repositories_url": "https://api.github.com/teams/1/repos",
									"slug":             "justice-league",
									"url":              "https://api.github.com/teams/1",
								}},
								"review_comment_url":  "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
								"review_comments_url": "https://api.github.com/repos/antham/versem/pulls/1348/comments",
								"state":               "open",
								"statuses_url":        "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
								"title":               "new-feature",
								"updated_at":          "2011-01-26T19:01:12Z",
								"url":                 "https://api.github.com/repos/antham/versem/pulls/1348",
								"user": map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/antham_happy.gif",
									"events_url":          "https://api.github.com/users/antham/events{/privacy}",
									"followers_url":       "https://api.github.com/users/antham/followers",
									"following_url":       "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/antham",
									"id":                  1,
									"login":               "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
							},
						},
					)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "several entries found associated with commit a6e6c8b8c34d2382e591587e960e7e7f825cb221")
			},
		},
		{
			"Several semver label found",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]interface{}{
							map[string]interface{}{
								"_links": map[string]interface{}{
									"comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347/comments",
									},
									"commits": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/commits",
									},
									"html": map[string]interface{}{
										"href": "https://github.com/antham/versem/pull/1347",
									},
									"issue": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347",
									},
									"review_comment": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
									},
									"review_comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
									},
									"self": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347",
									},
									"statuses": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
									},
								},
								"active_lock_reason": "too heated",
								"assignee": map[string]interface{}{
									"avatar_url":    "https://github.com/images/error/antham_happy.gif",
									"events_url":    "https://api.github.com/users/antham/events{/privacy}",
									"followers_url": "https://api.github.com/users/antham/followers",
									"following_url": "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":   "",
									"html_url":      "https://github.com/antham",
									"id":            1, "login": "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
								"assignees": []interface{}{
									map[string]interface{}{
										"avatar_url":    "https://github.com/images/error/antham_happy.gif",
										"events_url":    "https://api.github.com/users/antham/events{/privacy}",
										"followers_url": "https://api.github.com/users/antham/followers",
										"following_url": "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":   "",
										"html_url":      "https://github.com/antham",
										"id":            1, "login": "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"author_association": "OWNER",
								"base": map[string]interface{}{
									"label": "antham:master",
									"ref":   "master",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false,
										"assignees_url":      "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":          "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":       "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":          "https://github.com/antham/versem.git",
										"collaborators_url":  "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":       "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":        "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":        "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":       "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":   "http://api.github.com/repos/antham/versem/contributors",
										"created_at":         "2011-01-26T19:01:12Z",
										"default_branch":     "master",
										"deployments_url":    "http://api.github.com/repos/antham/versem/deployments",
										"description":        "This your first repo!",
										"disabled":           false,
										"downloads_url":      "http://api.github.com/repos/antham/versem/downloads",
										"events_url":         "http://api.github.com/repos/antham/versem/events",
										"fork":               false,
										"forks_count":        9,
										"forks_url":          "http://api.github.com/repos/antham/versem/forks",
										"full_name":          "antham/versem",
										"git_commits_url":    "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":       "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":       "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":            "git:github.com/antham/versem.git",
										"has_downloads":      true,
										"has_issues":         true,
										"has_pages":          false,
										"has_projects":       true,
										"has_wiki":           true,
										"homepage":           "https://github.com",
										"hooks_url":          "http://api.github.com/repos/antham/versem/hooks",
										"html_url":           "https://github.com/antham/versem",
										"id":                 1.296269e+06,
										"issue_comment_url":  "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":   "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":         "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":           "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":         "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":           interface{}(nil),
										"languages_url":      "http://api.github.com/repos/antham/versem/languages",
										"merges_url":         "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":     "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":         "git:git.example.com/antham/versem",
										"name":               "versem",
										"network_count":      0,
										"node_id":            "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url":  "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count":  0,
										"owner": map[string]interface{}{
											"avatar_url":    "https://github.com/images/error/antham_happy.gif",
											"events_url":    "https://api.github.com/users/antham/events{/privacy}",
											"followers_url": "https://api.github.com/users/antham/followers",
											"following_url": "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":   "",
											"html_url":      "https://github.com/antham",
											"id":            1, "login": "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"body":         "Please pull these awesome changes",
								"closed_at":    "2011-01-26T19:01:12Z",
								"comments_url": "https://api.github.com/repos/antham/versem/issues/1347/comments",
								"commits_url":  "https://api.github.com/repos/antham/versem/pulls/1347/commits",
								"created_at":   "2011-01-26T19:01:12Z",
								"diff_url":     "https://github.com/antham/versem/pull/1347.diff",
								"draft":        false,
								"head": map[string]interface{}{
									"label": "antham:new-topic",
									"ref":   "new-topic",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false, "assignees_url": "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":         "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":      "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":         "https://github.com/antham/versem.git",
										"collaborators_url": "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":      "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":       "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":       "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":      "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":  "http://api.github.com/repos/antham/versem/contributors",
										"created_at":        "2011-01-26T19:01:12Z",
										"default_branch":    "master",
										"deployments_url":   "http://api.github.com/repos/antham/versem/deployments",
										"description":       "This your first repo!",
										"disabled":          false,
										"downloads_url":     "http://api.github.com/repos/antham/versem/downloads",
										"events_url":        "http://api.github.com/repos/antham/versem/events",
										"fork":              false,
										"forks_count":       9,
										"forks_url":         "http://api.github.com/repos/antham/versem/forks",
										"full_name":         "antham/versem",
										"git_commits_url":   "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":      "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":      "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":           "git:github.com/antham/versem.git",
										"has_downloads":     true,
										"has_issues":        true,
										"has_pages":         false,
										"has_projects":      true,
										"has_wiki":          true,
										"homepage":          "https://github.com",
										"hooks_url":         "http://api.github.com/repos/antham/versem/hooks",
										"html_url":          "https://github.com/antham/versem",
										"id":                1.296269e+06,
										"issue_comment_url": "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":  "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":        "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":          "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":        "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":          interface{}(nil),
										"languages_url":     "http://api.github.com/repos/antham/versem/languages",
										"merges_url":        "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":    "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":        "git:git.example.com/antham/versem",
										"name":              "versem",
										"network_count":     0,
										"node_id":           "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url": "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count": 0,
										"owner": map[string]interface{}{
											"avatar_url":          "https://github.com/images/error/antham_happy.gif",
											"events_url":          "https://api.github.com/users/antham/events{/privacy}",
											"followers_url":       "https://api.github.com/users/antham/followers",
											"following_url":       "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":         "",
											"html_url":            "https://github.com/antham",
											"id":                  1,
											"login":               "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
								},
								"html_url":  "https://github.com/antham/versem/pull/1347",
								"id":        1,
								"issue_url": "https://api.github.com/repos/antham/versem/issues/1347",
								"labels": []interface{}{
									map[string]interface{}{
										"color":       "abcd12",
										"default":     true,
										"description": "Patch",
										"id":          2.08045946e+08,
										"name":        "patch",
										"node_id":     "MDU6TGFiZWwyMDgwNDU5NDY=",
										"url":         "https://api.github.com/repos/antham/versem/labels/patch",
									},
									map[string]interface{}{
										"color":       "abcd34",
										"default":     true,
										"description": "Minor",
										"id":          2.08045947e+08,
										"name":        "minor",
										"node_id":     "MDU6TGFiZWwyMDgwNDU5NDW=",
										"url":         "https://api.github.com/repos/antham/versem/labels/minor",
									},
								},
								"Locked": true, "merge_commit_sha": "e5bd3914e2e596debea16f433f57875b5b90bcd6",
								"merged_at": "2011-01-26T19:01:12Z",
								"milestone": map[string]interface{}{
									"closed_at":     "2013-02-12T13:22:01Z",
									"closed_issues": 8,
									"created_at":    "2011-04-10T20:09:31Z",
									"creator": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
									"description": "Tracking milestone for version 1.0",
									"due_on":      "2012-10-09T23:39:01Z",
									"html_url":    "https://github.com/antham/versem/milestones/v1.0",
									"id":          1.002604e+06,
									"labels_url":  "https://api.github.com/repos/antham/versem/milestones/1/labels",
									"node_id":     "MDk6TWlsZXN0b25lMTAwMjYwNA==",
									"number":      1,
									"open_issues": 4,
									"state":       "open",
									"title":       "v1.0",
									"updated_at":  "2014-03-03T18:58:10Z",
									"url":         "https://api.github.com/repos/antham/versem/milestones/1",
								},
								"node_id":   "MDExOlB1bGxSZXF1ZXN0MQ==",
								"number":    1347,
								"patch_url": "https://github.com/antham/versem/pull/1347.patch",
								"requested_reviewers": []interface{}{map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/other_user_happy.gif",
									"events_url":          "https://api.github.com/users/other_user/events{/privacy}",
									"followers_url":       "https://api.github.com/users/other_user/followers",
									"following_url":       "https://api.github.com/users/other_user/following{/other_user}",
									"gists_url":           "https://api.github.com/users/other_user/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/other_user",
									"id":                  1,
									"login":               "other_user",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/other_user/orgs",
									"received_events_url": "https://api.github.com/users/other_user/received_events",
									"repos_url":           "https://api.github.com/users/other_user/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/other_user/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/other_user/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/other_user",
								}},
								"requested_teams": []interface{}{map[string]interface{}{
									"description":      "A great team.",
									"id":               1,
									"members_url":      "https://api.github.com/teams/1/members{/member}",
									"name":             "Justice League",
									"node_id":          "MDQ6VGVhbTE=",
									"parent":           interface{}(nil),
									"permission":       "admin",
									"privacy":          "closed",
									"repositories_url": "https://api.github.com/teams/1/repos",
									"slug":             "justice-league",
									"url":              "https://api.github.com/teams/1",
								}},
								"review_comment_url":  "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
								"review_comments_url": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
								"state":               "open",
								"statuses_url":        "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
								"title":               "new-feature",
								"updated_at":          "2011-01-26T19:01:12Z",
								"url":                 "https://api.github.com/repos/antham/versem/pulls/1347",
								"user": map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/antham_happy.gif",
									"events_url":          "https://api.github.com/users/antham/events{/privacy}",
									"followers_url":       "https://api.github.com/users/antham/followers",
									"following_url":       "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/antham",
									"id":                  1,
									"login":               "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
							},
						},
					)
			},
			func(version Version, err error) {
				assert.EqualError(t, err, "can't parse version from commit a6e6c8b8c34d2382e591587e960e7e7f825cb221 : more than one semver label found")
			},
		},
		{
			"Fetch minor label",
			func() {
				gock.New("https://api.github.com").
					Get("/repos/antham/versem/commits/a6e6c8b8c34d2382e591587e960e7e7f825cb221/pulls").
					MatchHeader("Accept", "application/vnd.github.groot.preview.json").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(200).
					JSON(
						[]interface{}{
							map[string]interface{}{
								"_links": map[string]interface{}{
									"comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347/comments",
									},
									"commits": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/commits",
									},
									"html": map[string]interface{}{
										"href": "https://github.com/antham/versem/pull/1347",
									},
									"issue": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/issues/1347",
									},
									"review_comment": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
									},
									"review_comments": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
									},
									"self": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/pulls/1347",
									},
									"statuses": map[string]interface{}{
										"href": "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
									},
								},
								"active_lock_reason": "too heated",
								"assignee": map[string]interface{}{
									"avatar_url":    "https://github.com/images/error/antham_happy.gif",
									"events_url":    "https://api.github.com/users/antham/events{/privacy}",
									"followers_url": "https://api.github.com/users/antham/followers",
									"following_url": "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":   "",
									"html_url":      "https://github.com/antham",
									"id":            1, "login": "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
								"assignees": []interface{}{
									map[string]interface{}{
										"avatar_url":    "https://github.com/images/error/antham_happy.gif",
										"events_url":    "https://api.github.com/users/antham/events{/privacy}",
										"followers_url": "https://api.github.com/users/antham/followers",
										"following_url": "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":   "",
										"html_url":      "https://github.com/antham",
										"id":            1, "login": "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"author_association": "OWNER",
								"base": map[string]interface{}{
									"label": "antham:master",
									"ref":   "master",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false,
										"assignees_url":      "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":          "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":       "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":          "https://github.com/antham/versem.git",
										"collaborators_url":  "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":       "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":        "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":        "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":       "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":   "http://api.github.com/repos/antham/versem/contributors",
										"created_at":         "2011-01-26T19:01:12Z",
										"default_branch":     "master",
										"deployments_url":    "http://api.github.com/repos/antham/versem/deployments",
										"description":        "This your first repo!",
										"disabled":           false,
										"downloads_url":      "http://api.github.com/repos/antham/versem/downloads",
										"events_url":         "http://api.github.com/repos/antham/versem/events",
										"fork":               false,
										"forks_count":        9,
										"forks_url":          "http://api.github.com/repos/antham/versem/forks",
										"full_name":          "antham/versem",
										"git_commits_url":    "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":       "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":       "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":            "git:github.com/antham/versem.git",
										"has_downloads":      true,
										"has_issues":         true,
										"has_pages":          false,
										"has_projects":       true,
										"has_wiki":           true,
										"homepage":           "https://github.com",
										"hooks_url":          "http://api.github.com/repos/antham/versem/hooks",
										"html_url":           "https://github.com/antham/versem",
										"id":                 1.296269e+06,
										"issue_comment_url":  "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":   "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":         "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":           "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":         "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":           interface{}(nil),
										"languages_url":      "http://api.github.com/repos/antham/versem/languages",
										"merges_url":         "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":     "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":         "git:git.example.com/antham/versem",
										"name":               "versem",
										"network_count":      0,
										"node_id":            "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url":  "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count":  0,
										"owner": map[string]interface{}{
											"avatar_url":    "https://github.com/images/error/antham_happy.gif",
											"events_url":    "https://api.github.com/users/antham/events{/privacy}",
											"followers_url": "https://api.github.com/users/antham/followers",
											"following_url": "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":     "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":   "",
											"html_url":      "https://github.com/antham",
											"id":            1, "login": "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
										"type":              "User",
										"url":               "https://api.github.com/users/antham",
									},
								},
								"body":         "Please pull these awesome changes",
								"closed_at":    "2011-01-26T19:01:12Z",
								"comments_url": "https://api.github.com/repos/antham/versem/issues/1347/comments",
								"commits_url":  "https://api.github.com/repos/antham/versem/pulls/1347/commits",
								"created_at":   "2011-01-26T19:01:12Z",
								"diff_url":     "https://github.com/antham/versem/pull/1347.diff",
								"draft":        false,
								"head": map[string]interface{}{
									"label": "antham:new-topic",
									"ref":   "new-topic",
									"repo": map[string]interface{}{
										"allow_merge_commit": true,
										"allow_rebase_merge": true,
										"allow_squash_merge": true,
										"archive_url":        "http://api.github.com/repos/antham/versem/{archive_format}{/ref}",
										"archived":           false, "assignees_url": "http://api.github.com/repos/antham/versem/assignees{/user}",
										"blobs_url":         "http://api.github.com/repos/antham/versem/git/blobs{/sha}",
										"branches_url":      "http://api.github.com/repos/antham/versem/branches{/branch}",
										"clone_url":         "https://github.com/antham/versem.git",
										"collaborators_url": "http://api.github.com/repos/antham/versem/collaborators{/collaborator}",
										"comments_url":      "http://api.github.com/repos/antham/versem/comments{/number}",
										"commits_url":       "http://api.github.com/repos/antham/versem/commits{/sha}",
										"compare_url":       "http://api.github.com/repos/antham/versem/compare/{base}...{head}",
										"contents_url":      "http://api.github.com/repos/antham/versem/contents/{+path}",
										"contributors_url":  "http://api.github.com/repos/antham/versem/contributors",
										"created_at":        "2011-01-26T19:01:12Z",
										"default_branch":    "master",
										"deployments_url":   "http://api.github.com/repos/antham/versem/deployments",
										"description":       "This your first repo!",
										"disabled":          false,
										"downloads_url":     "http://api.github.com/repos/antham/versem/downloads",
										"events_url":        "http://api.github.com/repos/antham/versem/events",
										"fork":              false,
										"forks_count":       9,
										"forks_url":         "http://api.github.com/repos/antham/versem/forks",
										"full_name":         "antham/versem",
										"git_commits_url":   "http://api.github.com/repos/antham/versem/git/commits{/sha}",
										"git_refs_url":      "http://api.github.com/repos/antham/versem/git/refs{/sha}",
										"git_tags_url":      "http://api.github.com/repos/antham/versem/git/tags{/sha}",
										"git_url":           "git:github.com/antham/versem.git",
										"has_downloads":     true,
										"has_issues":        true,
										"has_pages":         false,
										"has_projects":      true,
										"has_wiki":          true,
										"homepage":          "https://github.com",
										"hooks_url":         "http://api.github.com/repos/antham/versem/hooks",
										"html_url":          "https://github.com/antham/versem",
										"id":                1.296269e+06,
										"issue_comment_url": "http://api.github.com/repos/antham/versem/issues/comments{/number}",
										"issue_events_url":  "http://api.github.com/repos/antham/versem/issues/events{/number}",
										"issues_url":        "http://api.github.com/repos/antham/versem/issues{/number}",
										"keys_url":          "http://api.github.com/repos/antham/versem/keys{/key_id}",
										"labels_url":        "http://api.github.com/repos/antham/versem/labels{/name}",
										"language":          interface{}(nil),
										"languages_url":     "http://api.github.com/repos/antham/versem/languages",
										"merges_url":        "http://api.github.com/repos/antham/versem/merges",
										"milestones_url":    "http://api.github.com/repos/antham/versem/milestones{/number}",
										"mirror_url":        "git:git.example.com/antham/versem",
										"name":              "versem",
										"network_count":     0,
										"node_id":           "MDEwOlJlcG9zaXRvcnkxMjk2MjY5",
										"notifications_url": "http://api.github.com/repos/antham/versem/notifications{?since,all,participating}",
										"open_issues_count": 0,
										"owner": map[string]interface{}{
											"avatar_url":          "https://github.com/images/error/antham_happy.gif",
											"events_url":          "https://api.github.com/users/antham/events{/privacy}",
											"followers_url":       "https://api.github.com/users/antham/followers",
											"following_url":       "https://api.github.com/users/antham/following{/other_user}",
											"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
											"gravatar_id":         "",
											"html_url":            "https://github.com/antham",
											"id":                  1,
											"login":               "antham",
											"node_id":             "MDQ6VXNlcjE=",
											"organizations_url":   "https://api.github.com/users/antham/orgs",
											"received_events_url": "https://api.github.com/users/antham/received_events",
											"repos_url":           "https://api.github.com/users/antham/repos",
											"site_admin":          false,
											"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
											"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
											"type":                "User",
											"url":                 "https://api.github.com/users/antham",
										},
										"permissions": map[string]interface{}{
											"admin": false,
											"pull":  true,
											"push":  false,
										},
										"private":           false,
										"pulls_url":         "http://api.github.com/repos/antham/versem/pulls{/number}",
										"pushed_at":         "2011-01-26T19:06:43Z",
										"releases_url":      "http://api.github.com/repos/antham/versem/releases{/id}",
										"size":              108,
										"ssh_url":           "git@github.com:antham/versem.git",
										"stargazers_count":  80,
										"stargazers_url":    "http://api.github.com/repos/antham/versem/stargazers",
										"statuses_url":      "http://api.github.com/repos/antham/versem/statuses/{sha}",
										"subscribers_count": 42,
										"subscribers_url":   "http://api.github.com/repos/antham/versem/subscribers",
										"subscription_url":  "http://api.github.com/repos/antham/versem/subscription",
										"svn_url":           "https://svn.github.com/antham/versem",
										"tags_url":          "http://api.github.com/repos/antham/versem/tags",
										"teams_url":         "http://api.github.com/repos/antham/versem/teams",
										"topics": []interface{}{
											"antham",
											"atom",
											"electron",
											"api",
										},
										"trees_url":      "http://api.github.com/repos/antham/versem/git/trees{/sha}",
										"updated_at":     "2011-01-26T19:14:43Z",
										"url":            "https://api.github.com/repos/antham/versem",
										"watchers_count": 80,
									},
									"sha": "6dcb09b5b57875f334f61aebed695e2e4193db5e",
									"user": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
								},
								"html_url":  "https://github.com/antham/versem/pull/1347",
								"id":        1,
								"issue_url": "https://api.github.com/repos/antham/versem/issues/1347",
								"labels": []interface{}{
									map[string]interface{}{
										"color":       "abcd34",
										"default":     true,
										"description": "Minor",
										"id":          2.08045947e+08,
										"name":        "minor",
										"node_id":     "MDU6TGFiZWwyMDgwNDU5NDW=",
										"url":         "https://api.github.com/repos/antham/versem/labels/minor",
									},
								},
								"Locked": true, "merge_commit_sha": "e5bd3914e2e596debea16f433f57875b5b90bcd6",
								"merged_at": "2011-01-26T19:01:12Z",
								"milestone": map[string]interface{}{
									"closed_at":     "2013-02-12T13:22:01Z",
									"closed_issues": 8,
									"created_at":    "2011-04-10T20:09:31Z",
									"creator": map[string]interface{}{
										"avatar_url":          "https://github.com/images/error/antham_happy.gif",
										"events_url":          "https://api.github.com/users/antham/events{/privacy}",
										"followers_url":       "https://api.github.com/users/antham/followers",
										"following_url":       "https://api.github.com/users/antham/following{/other_user}",
										"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
										"gravatar_id":         "",
										"html_url":            "https://github.com/antham",
										"id":                  1,
										"login":               "antham",
										"node_id":             "MDQ6VXNlcjE=",
										"organizations_url":   "https://api.github.com/users/antham/orgs",
										"received_events_url": "https://api.github.com/users/antham/received_events",
										"repos_url":           "https://api.github.com/users/antham/repos",
										"site_admin":          false,
										"starred_url":         "https://api.github.com/users/antham/starred{/owner}{/repo}",
										"subscriptions_url":   "https://api.github.com/users/antham/subscriptions",
										"type":                "User",
										"url":                 "https://api.github.com/users/antham",
									},
									"description": "Tracking milestone for version 1.0",
									"due_on":      "2012-10-09T23:39:01Z",
									"html_url":    "https://github.com/antham/versem/milestones/v1.0",
									"id":          1.002604e+06,
									"labels_url":  "https://api.github.com/repos/antham/versem/milestones/1/labels",
									"node_id":     "MDk6TWlsZXN0b25lMTAwMjYwNA==",
									"number":      1,
									"open_issues": 4,
									"state":       "open",
									"title":       "v1.0",
									"updated_at":  "2014-03-03T18:58:10Z",
									"url":         "https://api.github.com/repos/antham/versem/milestones/1",
								},
								"node_id":   "MDExOlB1bGxSZXF1ZXN0MQ==",
								"number":    1347,
								"patch_url": "https://github.com/antham/versem/pull/1347.patch",
								"requested_reviewers": []interface{}{map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/other_user_happy.gif",
									"events_url":          "https://api.github.com/users/other_user/events{/privacy}",
									"followers_url":       "https://api.github.com/users/other_user/followers",
									"following_url":       "https://api.github.com/users/other_user/following{/other_user}",
									"gists_url":           "https://api.github.com/users/other_user/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/other_user",
									"id":                  1,
									"login":               "other_user",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/other_user/orgs",
									"received_events_url": "https://api.github.com/users/other_user/received_events",
									"repos_url":           "https://api.github.com/users/other_user/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/other_user/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/other_user/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/other_user",
								}},
								"requested_teams": []interface{}{map[string]interface{}{
									"description":      "A great team.",
									"id":               1,
									"members_url":      "https://api.github.com/teams/1/members{/member}",
									"name":             "Justice League",
									"node_id":          "MDQ6VGVhbTE=",
									"parent":           interface{}(nil),
									"permission":       "admin",
									"privacy":          "closed",
									"repositories_url": "https://api.github.com/teams/1/repos",
									"slug":             "justice-league",
									"url":              "https://api.github.com/teams/1",
								}},
								"review_comment_url":  "https://api.github.com/repos/antham/versem/pulls/comments{/number}",
								"review_comments_url": "https://api.github.com/repos/antham/versem/pulls/1347/comments",
								"state":               "open",
								"statuses_url":        "https://api.github.com/repos/antham/versem/statuses/6dcb09b5b57875f334f61aebed695e2e4193db5e",
								"title":               "new-feature",
								"updated_at":          "2011-01-26T19:01:12Z",
								"url":                 "https://api.github.com/repos/antham/versem/pulls/1347",
								"user": map[string]interface{}{
									"avatar_url":          "https://github.com/images/error/antham_happy.gif",
									"events_url":          "https://api.github.com/users/antham/events{/privacy}",
									"followers_url":       "https://api.github.com/users/antham/followers",
									"following_url":       "https://api.github.com/users/antham/following{/other_user}",
									"gists_url":           "https://api.github.com/users/antham/gists{/gist_id}",
									"gravatar_id":         "",
									"html_url":            "https://github.com/antham",
									"id":                  1,
									"login":               "antham",
									"node_id":             "MDQ6VXNlcjE=",
									"organizations_url":   "https://api.github.com/users/antham/orgs",
									"received_events_url": "https://api.github.com/users/antham/received_events",
									"repos_url":           "https://api.github.com/users/antham/repos",
									"site_admin":          false, "starred_url": "https://api.github.com/users/antham/starred{/owner}{/repo}",
									"subscriptions_url": "https://api.github.com/users/antham/subscriptions",
									"type":              "User",
									"url":               "https://api.github.com/users/antham",
								},
							},
						},
					)
			},
			func(version Version, err error) {
				assert.Nil(t, err)
				assert.Equal(t, MINOR, version)
			},
		},
	}

	for _, scenario := range scenarios {
		scenario := scenario
		t.Run(scenario.name, func(*testing.T) {
			scenario.setup()
			s := NewSemverLabelService("antham", "versem", "396531004112aa66a7fda31bfdca7d00")
			scenario.test(s.GetFromCommit("a6e6c8b8c34d2382e591587e960e7e7f825cb221"))
			assert.True(t, gock.IsDone())
		})
	}
}

func TestSemverLabelServiceCreateList(t *testing.T) {
	defer gock.Off()

	scenarios := []struct {
		name  string
		setup func()
		test  func(err error)
	}{
		{
			"An error occurred when requesting github api",
			func() {
				gock.New("https://api.github.com").
					Post("/repos/antham/versem/labels").
					MatchHeader("Authorization", "Bearer 396531004112aa66a7fda31bfdca7d00").
					Reply(400).
					JSON(
						map[string]interface{}{
							"message": "Problems parsing JSON",
						})
			},
			func(err error) {
				assert.EqualError(t, err, "can't create label norelease : POST https://api.github.com/repos/antham/versem/labels: 400 Problems parsing JSON []")
			},
		},
		{
			"Create all semver labels on repository",
			func() {
				for _, label := range [][]string{
					{
						"norelease",
						"bdbdbd",
						"Produces no new version when pull request is merged on master",
					},
					{
						"patch",
						"0e8a16",
						"Produce a new semver patch version when pull request is merged on master",
					},
					{
						"minor",
						"fbca04",
						"Produce a new semver minor version when pull request is merged on master",
					},
					{
						"major",
						"d93f0b",
						"Produce a new semver major version when pull request is merged on master",
					},
				} {
					gock.New("https://api.github.com").
						Post("/repos/antham/versem/labels").
						MatchHeader("Authorization", "earer 396531004112aa66a7fda31bfdca7d00").
						MatchType("json").
						JSON(
							map[string]interface{}{
								"name":        label[0],
								"color":       label[1],
								"description": label[2],
							},
						).
						Reply(201)
				}
			},
			func(err error) {
				assert.Nil(t, err)
			},
		},
	}

	for _, scenario := range scenarios {
		scenario := scenario
		t.Run(scenario.name, func(*testing.T) {
			scenario.setup()
			s := NewSemverLabelService("antham", "versem", "396531004112aa66a7fda31bfdca7d00")
			scenario.test(s.CreateList())
			assert.True(t, gock.IsDone())
		})
	}
}

func TestExtractSemverLabels(t *testing.T) {
	scenarios := []struct {
		name        string
		getArgument func() []github.Label
		test        func(Version, error)
	}{
		{
			"Several release label defined",
			func() []github.Label {
				major := "major"
				minor := "minor"

				return []github.Label{
					{
						Name: &major,
					},
					{
						Name: &minor,
					},
				}
			},
			func(versions Version, err error) {
				assert.EqualError(t, err, "more than one semver label found")
			},
		},
		{
			"No release labels found",
			func() []github.Label {
				return []github.Label{}
			},
			func(versions Version, err error) {
				assert.EqualError(t, err, "no semver label found")
			},
		},
		{
			"Patch label found",
			func() []github.Label {
				patch := "patch"
				return []github.Label{
					{
						Name: &patch,
					},
				}
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, PATCH, version)
			},
		},
		{
			"Minor label found",
			func() []github.Label {
				minor := "minor"
				return []github.Label{
					{
						Name: &minor,
					},
				}
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, MINOR, version)
			},
		},
		{
			"Major label found",
			func() []github.Label {
				major := "major"
				return []github.Label{
					{
						Name: &major,
					},
				}
			},
			func(version Version, err error) {
				assert.NoError(t, err)
				assert.Equal(t, MAJOR, version)
			},
		},
	}

	for _, scenario := range scenarios {
		scenario := scenario
		t.Run(scenario.name, func(*testing.T) {
			scenario.test(extractSemverLabels(scenario.getArgument()))
		})
	}
}
